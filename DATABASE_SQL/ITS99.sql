-- MySQL Script generated by MySQL Workbench
-- Thu Aug  6 17:21:37 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema ITS_KENNEDY
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema ITS_KENNEDY
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `ITS_KENNEDY` DEFAULT CHARACTER SET utf8 ;
USE `ITS_KENNEDY` ;

-- -----------------------------------------------------
-- Table `ITS_KENNEDY`.`HW`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ITS_KENNEDY`.`HW` ;

CREATE TABLE IF NOT EXISTS `ITS_KENNEDY`.`HW` (
  `idHW` INT NOT NULL AUTO_INCREMENT,
  `Cpu` VARCHAR(45) NULL DEFAULT NULL,
  `Ram` INT NULL DEFAULT NULL,
  `Memoria` INT NULL DEFAULT NULL,
  `Tipo_memoria` TINYINT NULL DEFAULT NULL,
  `marca` VARCHAR(45) NULL DEFAULT NULL,
  `modello` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idHW`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ITS_KENNEDY`.`SEDE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ITS_KENNEDY`.`SEDE` ;

CREATE TABLE IF NOT EXISTS `ITS_KENNEDY`.`SEDE` (
  `idSEDE` INT NOT NULL AUTO_INCREMENT,
  `SEDE` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`idSEDE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ITS_KENNEDY`.`PC`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ITS_KENNEDY`.`PC` ;

CREATE TABLE IF NOT EXISTS `ITS_KENNEDY`.`PC` (
  `idpc` INT NOT NULL AUTO_INCREMENT,
  `HW_idHW` INT NOT NULL,
  `Seriale` VARCHAR(70) NOT NULL,
  `n_inventario` VARCHAR(45) NOT NULL,
  `n_fattura` VARCHAR(45) NOT NULL,
  `data_Acquisto` DATE NOT NULL,
  `guasto` TINYINT NULL DEFAULT NULL,
  `note` VARCHAR(500) NULL DEFAULT NULL,
  `K_O` TINYINT NULL DEFAULT NULL,
  `SEDE_idSEDE` INT NOT NULL,
  PRIMARY KEY (`idpc`),
  INDEX `fk_PC_HW_idx` (`HW_idHW` ASC) VISIBLE,
  INDEX `fk_PC_SEDE1_idx` (`SEDE_idSEDE` ASC) VISIBLE,
  CONSTRAINT `fk_PC_HW`
    FOREIGN KEY (`HW_idHW`)
    REFERENCES `ITS_KENNEDY`.`HW` (`idHW`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PC_SEDE1`
    FOREIGN KEY (`SEDE_idSEDE`)
    REFERENCES `ITS_KENNEDY`.`SEDE` (`idSEDE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ITS_KENNEDY`.`UTENTE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ITS_KENNEDY`.`UTENTE` ;

CREATE TABLE IF NOT EXISTS `ITS_KENNEDY`.`UTENTE` (
  `idUTENTE` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(70) NULL DEFAULT NULL,
  `cognome` VARCHAR(70) NULL DEFAULT NULL,
  `data_nascita` DATE NULL DEFAULT NULL,
  `luogo_nascita` VARCHAR(70) NULL DEFAULT NULL,
  `via` VARCHAR(70) NULL DEFAULT NULL,
  `civico` INT NULL DEFAULT NULL,
  `comune` VARCHAR(100) NULL DEFAULT NULL,
  `provincia_sigla` VARCHAR(4) NULL DEFAULT NULL,
  `tipo_utente` VARCHAR(50) NULL DEFAULT NULL,
  `corso` VARCHAR(100) NULL DEFAULT NULL,
  `frequentazione` TINYINT NULL DEFAULT NULL,
  `SEDE_idSEDE` INT NOT NULL,
  PRIMARY KEY (`idUTENTE`),
  INDEX `fk_UTENTE_SEDE1_idx` (`SEDE_idSEDE` ASC) VISIBLE,
  CONSTRAINT `fk_UTENTE_SEDE1`
    FOREIGN KEY (`SEDE_idSEDE`)
    REFERENCES `ITS_KENNEDY`.`SEDE` (`idSEDE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ITS_KENNEDY`.`MOVIMENTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ITS_KENNEDY`.`MOVIMENTO` ;

CREATE TABLE IF NOT EXISTS `ITS_KENNEDY`.`MOVIMENTO` (
  `idMOVIMENTO` INT NOT NULL AUTO_INCREMENT,
  `data_consegna` VARCHAR(45) NULL DEFAULT NULL,
  `cavo_rete` TINYINT NULL DEFAULT NULL,
  `alimentatore` TINYINT NULL DEFAULT NULL,
  `borsa` TINYINT NULL DEFAULT NULL,
  `mouse` TINYINT NULL DEFAULT NULL,
  `hdd` TINYINT NULL DEFAULT NULL,
  `con_ethernet` TINYINT NULL DEFAULT NULL,
  `con_usb` TINYINT NULL DEFAULT NULL,
  `note` VARCHAR(500) NULL DEFAULT NULL,
  `motivo_movimento` VARCHAR(200) NULL DEFAULT NULL,
  `PC_idpc` INT NOT NULL,
  `UTENTE_idUTENTE` INT NOT NULL,
  `entrata` TINYINT NULL DEFAULT NULL,
  `uscita` TINYINT NULL DEFAULT NULL,
  `guasto` TINYINT NULL DEFAULT NULL,
  `riparazione` TINYINT NULL DEFAULT NULL,
  PRIMARY KEY (`idMOVIMENTO`),
  INDEX `fk_MOVIMENTO_PC1_idx` (`PC_idpc` ASC) VISIBLE,
  INDEX `fk_MOVIMENTO_UTENTE1_idx` (`UTENTE_idUTENTE` ASC) VISIBLE,
  CONSTRAINT `fk_MOVIMENTO_PC1`
    FOREIGN KEY (`PC_idpc`)
    REFERENCES `ITS_KENNEDY`.`PC` (`idpc`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_MOVIMENTO_UTENTE1`
    FOREIGN KEY (`UTENTE_idUTENTE`)
    REFERENCES `ITS_KENNEDY`.`UTENTE` (`idUTENTE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ITS_KENNEDY`.`GUASTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ITS_KENNEDY`.`GUASTO` ;

CREATE TABLE IF NOT EXISTS `ITS_KENNEDY`.`GUASTO` (
  `idGUASTO` INT NOT NULL AUTO_INCREMENT,
  `data_consegna` DATE NULL DEFAULT NULL,
  `note` VARCHAR(500) NULL DEFAULT NULL,
  `MOVIMENTO_idMOVIMENTO` INT NOT NULL,
  PRIMARY KEY (`idGUASTO`),
  INDEX `fk_GUASTO_MOVIMENTO1_idx` (`MOVIMENTO_idMOVIMENTO` ASC) VISIBLE,
  CONSTRAINT `fk_GUASTO_MOVIMENTO1`
    FOREIGN KEY (`MOVIMENTO_idMOVIMENTO`)
    REFERENCES `ITS_KENNEDY`.`MOVIMENTO` (`idMOVIMENTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ITS_KENNEDY`.`ADMIN`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ITS_KENNEDY`.`ADMIN` ;

CREATE TABLE IF NOT EXISTS `ITS_KENNEDY`.`ADMIN` (
  `idADMIN` INT NOT NULL AUTO_INCREMENT,
  `Nome_Admin` VARCHAR(50) NOT NULL,
  `Cognome_Admin` VARCHAR(50) NOT NULL,
  `Username` VARCHAR(50) NOT NULL,
  `Email` VARCHAR(80) NOT NULL,
  `Password` VARCHAR(300) NOT NULL,
  `SEDE_idSEDE` INT NOT NULL,
  PRIMARY KEY (`idADMIN`),
  INDEX `fk_ADMIN_SEDE1_idx` (`SEDE_idSEDE` ASC) VISIBLE,
  CONSTRAINT `fk_ADMIN_SEDE1`
    FOREIGN KEY (`SEDE_idSEDE`)
    REFERENCES `ITS_KENNEDY`.`SEDE` (`idSEDE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
